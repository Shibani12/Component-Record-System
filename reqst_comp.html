<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" type="image/png" href="/asset/component.png">
    <title>Component Record System</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="/css/style.css">
</head>

<body>
    <nav>
        <div>
            <!-- <img src="/asset/logo.jpg" alt="Logo"> -->
            <h1>Component Record System</h1>
        </div>
        <a href="login.html">
            <button class="logout-button">Logout</button>
        </a>
    </nav>
    <div class="content-wrapper">
        <div class="sidebar">
            <ul>
                <li><a href="student_index.html">Home</a></li>
                <li><a href="comp_avalibility.html">Component Availability Check</a></li>
                <li><a href="reqst_comp.html">Request Hardware</a></li>
                <li><a href="status.html">Request Status</a></li>
                <li><a href="test.html">test</a></li>

            </ul>
        </div>
        <div class="main-content">
            <div class="col-md-10">
                <div class="container">
                    <h2 class="my-4">Request Hardware</h2>
                    <form id="requestForm">
                        <div class="mb-3">
                            <label for="user" class="form-label">Name:</label>
                            <input type="text" id="user" class="form-control" placeholder="Enter your name" required>
                        </div>

                        <div class="mb-3">
                            <label for="category" class="form-label">Select Category:</label>
                            <select id="category" class="form-select" required>
                                <option value="" disabled selected>-- Select Category --</option>
                                <option value="Microcontrollers">Microcontrollers</option>
                                <option value="Motors">Motors</option>
                                <option value="Sensors">Sensors</option>
                            </select>
                        </div>

                        <div class="mb-3">
                            <label for="components" class="form-label">Select Components:</label>
                            <select id="components" class="form-select" multiple required>
                                <option value="" disabled>-- Select Components --</option>
                            </select>
                        </div>

                        <button type="submit" class="btn btn-primary">Submit Request</button>
                    </form>
                </div>
            </div>
        </div>
    </div>
    </div>

    <script>
        const categoryData = {
            Microcontrollers: [
                { value: "Arduino Uno", label: "Arduino Uno" },
                { value: "Raspberry Pi", label: "Raspberry Pi" }
            ],
            Motors: [
                { value: "Stepper Motors", label: "Stepper Motors" },
                { value: "Servo Motors", label: "Servo Motors" },
                { value: "DC Motors", label: "DC Motors" }
            ],
            Sensors: [
                { value: "Temperature Sensor", label: "Temperature Sensor" },
                { value: "Ultrasonic Sensor", label: "Ultrasonic Sensor" },
                { value: "Light Sensor", label: "Light Sensor" }
            ]
        };

        // Populate components based on selected category
        const categorySelect = document.getElementById("category");
        const componentsSelect = document.getElementById("components");

        categorySelect.addEventListener("change", function () {
            const selectedCategory = this.value;
            componentsSelect.innerHTML = '<option value="" disabled>-- Select Components --</option>';

            if (categoryData[selectedCategory]) {
                categoryData[selectedCategory].forEach(component => {
                    const option = document.createElement("option");
                    option.value = component.value;
                    option.textContent = component.label;
                    componentsSelect.appendChild(option);
                });
            }
        });

        // Handle form submission
        document.getElementById('requestForm').addEventListener('submit', function (e) {
            e.preventDefault();

            const userName = document.getElementById('user').value;
            const category = document.getElementById('category').value;
            const selectedComponents = Array.from(componentsSelect.selectedOptions).map(option => option.value);

            if (!userName || !category || selectedComponents.length === 0) {
                alert('Please fill out all fields before submitting.');
                return;
            }

            // Store data in localStorage
            const requestData = JSON.parse(localStorage.getItem('requests')) || [];
            requestData.push({
                name: userName,
                components: selectedComponents.join(', '),
                status: "Pending"
            });
            localStorage.setItem('requests', JSON.stringify(requestData));

            // Redirect to status page
            window.location.href = "status.html";
        });

    </script>



</body>

</html>